---
import { pickArr } from "../../API/picksApi"
import "./BlogPostSection.css"

import { getCollection } from "astro:content"

const { name } = Astro.props
const posts = await getCollection("blog")
---

<section class="blogPosts" id="BlogPosts">
	<div class="blogPostsContainer">
		<div class="blogCategoryContainer">
			<div class="blogCategoryHeading">Parallel Picks</div>
			<div class="blogCategories">
				<div class="blogCategory">
					{
						pickArr.map((pick) => (
							<div class="categoryChip">
								<a
									href={`/search?search=${pick}`}
									style="position:relative; z-index: 5;"
								>
									{pick}
								</a>
							</div>
						))
					}
				</div>
			</div>
		</div>
		<div data-blog-post-container={encodeURIComponent(JSON.stringify(posts))}>
			<template class="blogPostsCardContainer" data-blog-post-template>
				<a href="/" data-blog-link>
					<article class="blogPostCardContent" data-post-card-content>
						<div class="blogPostTitle" data-blog-title></div>
						<div class="blogPostDescription" data-blog-description></div>
						<div class="contentMisc" data-misc-content>
							<span class="duration" data-duration></span>
						</div>
					</article>
					<div class="blogPostImage" data-post-image>
						<img class="postImage" src={"/public/line.svg"} data-blog-image />
					</div>
				</a>
			</template>
			<div class="no-result hide">No results found!</div>
		</div>
	</div>
	<script defer>
		const handleOnMouseMoveForCategories = (element) => {
			const { currentTarget: target } = element
			const rect = target.getBoundingClientRect(),
				x = (element.clientX = rect.left),
				y = element.clientY - rect.top

			target.style.setProperty("--mouse-x", `${x}px`)
			target.style.setProperty("--mouse-y", `${y}px`)
		}

		for (const card of document.querySelectorAll(".categoryChip")) {
			card.onmousemove = (element) => handleOnMouseMoveForCategories(element)
		}
	</script>
	<script src="/src/components/BlogPostSection/BlogPostSection.ts"></script>
</section>
